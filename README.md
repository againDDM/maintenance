# deploy app

## подготовка

Создайте виртуальное окружение

```sh
python3.12 -m venv venv
```

Активируйте виртуальное окружение

```sh
. ./venv/bin/activate
```

Установите ansible и другие необходимые для работы python пакеты в виртуальное окружение

```sh
pip install -r requirements.txt
```

## деплой

```sh
ansible-playbook -e "app_version=old" playbooks/deploy.yml
```

Обязательно передать через опцию версию приложения, которую хотим задеплоить.
Если требуется пароль на sudo, то следует добавить ключ `--ask-become-pass` для ввода пароля через консоль.

Cтатус `maintenance` в staytus перед деплоем выставится из плэйбука и оттуда же вернётся в исходное состояние.
